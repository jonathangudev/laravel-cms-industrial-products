!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([function(t,e){t.exports=function(t,e,a,n,i,s){var r,u=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(r=t,u=t.default);var o,d="function"==typeof u?u.options:u;if(e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),a&&(d.functional=!0),i&&(d._scopeId=i),s?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=o):n&&(o=n),o){var c=d.functional,p=c?d.render:d.beforeCreate;c?(d._injectStyles=o,d.render=function(t,e){return o.call(e),p(t,e)}):d.beforeCreate=p?[].concat(p,o):[o]}return{esModule:r,exports:u,options:d}}},function(t,e,a){a(2),t.exports=a(9)},function(t,e,a){Nova.booting(function(t,e){t.component("product-attribute-manager",a(3))})},function(t,e,a){var n=a(0)(a(4),a(8),!1,null,null,null);t.exports=n.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(5),i=a.n(n);e.default={props:["resourceName","resourceId","field"],data:function(){return{isModalOpen:!1,attributeValueToBeDeletedId:null,isAddingNew:!1,newName:"",newValue:"",selectedCompanyId:null,companies:[],_attributes:[],attributeValues:[]}},computed:{isDefaultCompany:function(){return null===this.selectedCompanyId},companyName:function(){var t=this,e=this.companies.find(function(e){return t.selectedCompanyId===e.id});return e?e.name:"Default"},companyAttributeIds:function(){return _.map(this.companyAttributeValues,function(t){return t.attribute_id})},companyAttributeValues:function(){var t=this;return _.filter(this.attributeValues,function(e){return null!==t.selectedCompanyId&&e.company_id===t.selectedCompanyId||null===e.company_id})},attributes:function(){var t=this;return _.filter(this.$data._attributes,function(e){return _.includes(t.companyAttributeIds,e.id)})}},methods:{getValuesForAttribute:function(t){return this.attributeValues.filter(function(e){return t===e.attribute_id})},handleAddAttribute:function(){this.isAddingNew=!0},handleSaveAttribute:function(){this.isAddingNew=!1,this.addAttribute()},handleCancelAttribute:function(){this.isAddingNew=!1,this.newName="",this.newValue=""},handleDeleteAttributeValue:function(t){this.isModalOpen=!0,this.attributeValueToBeDeletedId=t},handleCloseModal:function(){this.isModalOpen=!1,this.attributeValueToBeDeletedId=null},handleConfirmDeleteAttributeValue:function(){this.isModalOpen=!1,this.deleteAttributeValue()},addAttribute:function(){var t=this;axios.post("/nova-vendor/product-attribute-manager/"+this.resourceId+"/attribute",{company_id:this.selectedCompanyId,name:this.newName,value:this.newValue}).then(function(e){t.fetchData().then(function(){t.$toasted.show("Successfully added attribute.",{type:"success"})})}).catch(function(e){t.$toasted.show(e.response.data.message,{type:"error"})}).then(function(){t.newName="",t.newValue=""})},updateAttribute:function(t){var e=this;axios.put("/nova-vendor/product-attribute-manager/attribute",t).then(function(t){e.fetchData().then(function(){e.$toasted.show("Successfully updated attribute.",{type:"success"})})}).catch(function(t){e.$toasted.show(t.response.data.message,{type:"error"})})},deleteAttributeValue:function(){var t=this;axios.delete("/nova-vendor/product-attribute-manager/attribute-value/"+this.attributeValueToBeDeletedId).then(function(e){t.fetchData().then(function(){t.$toasted.show("Successfully deleted attribute.",{type:"success"})})}).catch(function(e){t.$toasted.show(e.response.data.message,{type:"error"})})},fetchData:function(){var t=this;return axios.get("/nova-vendor/product-attribute-manager/"+this.resourceId+"/attribute-data").then(function(e){t.companies=e.data.companies,t.$data._attributes=e.data.attributes,t.attributeValues=e.data.attributeValues,t.$emit("reset-attributes")}).catch(function(e){t.$toasted.show("There was an error fetching the data",{type:"error"})})}},components:{Attribute:i.a},mounted:function(){this.fetchData()}}},function(t,e,a){var n=a(0)(a(6),a(7),!1,null,null,null);t.exports=n.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["attribute","attributeValues","selectedCompanyId","isDefaultCompany"],data:function(){return{isEditing:!1,_name:null,_value:null,_isHidden:null,_isDefaultValue:null}},computed:{values:function(){var t=this;return this.attributeValues.filter(function(e){return t.attribute.id===e.attribute_id})},attributeValue:function(){var t=this,e=this.values.find(function(e){return t.selectedCompanyId===e.company_id});return e||(e=this.values.find(function(t){return!t.company_id}),this.$data._isDefaultValue=!0),null===e.company_id?this.$data._isDefaultValue=!0:this.$data._isDefaultValue=!1,e},name:{get:function(){return null!==this.$data._name?this.$data._name:this.attribute.name},set:function(t){this.$data._name=t}},value:{get:function(){return null!==this.$data._value?this.$data._value:this.attributeValue.value},set:function(t){this.$data._value=t}},isHidden:{get:function(){return null!==this.$data._isHidden?this.$data._isHidden:this.attributeValue.is_hidden},set:function(t){this.$data._isHidden=t}},canDelete:function(){return!this.isEditing&&(this.isDefaultCompany&&this.$data._isDefaultValue||!this.isDefaultCompany&&!this.$data._isDefaultValue)},updateData:function(){var t=_.clone(this.attribute),e=_.clone(this.attributeValue);return t.name=this.name,!0===this.$data._isDefaultValue&&this.selectedCompanyId!==e.company_id&&(delete e.id,delete e.created_at,delete e.updated_at),e.value=this.value,e.is_hidden=this.isHidden,e.company_id=this.selectedCompanyId,delete e.attribute,{attribute:t,attributeValue:e}}},watch:{selectedCompanyId:function(){this.resetAttribute()}},methods:{resetAttribute:function(){this.isEditing=!1,this.name=null,this.value=null,this.isHidden=null},handleCheckbox:function(t){this.isHidden=t},handleEdit:function(){this.isEditing=!0},handleDelete:function(){this.$emit("attribute-delete",this.attributeValue.id)},handleCancel:function(){this.resetAttribute()},handleSave:function(){this.isEditing=!1,this.$emit("attribute-update",this.updateData)}},created:function(){this.$parent.$on("reset-attributes",this.resetAttribute)}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center border-b border-40"},[a("div",{staticClass:"w-1/4 py-4 pr-3"},[t.isEditing&&t.isDefaultCompany?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"w-full form-control form-input form-input-bordered",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSave(e)},input:function(e){e.target.composing||(t.name=e.target.value)}}}):a("strong",[t._v(t._s(t.name))])]),t._v(" "),a("div",{staticClass:"flex items-center w-3/4 py-4"},[a("div",{staticClass:"w-2/3 pr-3"},[t.isEditing?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"w-full form-control form-input form-input-bordered",attrs:{type:"text",placeholder:"Value"},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSave(e)},input:function(e){e.target.composing||(t.value=e.target.value)}}}):a("span",{class:{"text-70":t.$data._isDefaultValue&&!t.isDefaultCompany}},[t._v(t._s(t.value))])]),t._v(" "),a("div",{staticClass:"w-1/6 pr-3"},[!t.isDefaultCompany&&t.isEditing?a("checkbox",{staticClass:"cursor-pointer",attrs:{checked:t.isHidden},on:{input:t.handleCheckbox}}):t._e(),t._v(" "),t.isDefaultCompany||t.isEditing||!t.isHidden?t._e():a("span",{staticClass:"fill-current text-70"},[a("svg",{staticClass:"block",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[a("path",{staticClass:"heroicon-ui",attrs:{d:"M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-2.3-8.7l1.3 1.29 3.3-3.3a1 1 0 0 1 1.4 1.42l-4 4a1 1 0 0 1-1.4 0l-2-2a1 1 0 0 1 1.4-1.42z"}})])])],1),t._v(" "),a("div",{staticClass:"w-1/6 flex items-center justify-end"},[t.isEditing?t._e():a("button",{staticClass:"btn mr-3",attrs:{type:"button",title:"Edit Value"},on:{click:t.handleEdit}},[a("icon",{staticClass:"block fill-current text-70 hover:text-primary",attrs:{type:"edit"}})],1),t._v(" "),t.canDelete?a("button",{staticClass:"btn",attrs:{type:"button",title:"Delete"},on:{click:t.handleDelete}},[a("icon",{staticClass:"block fill-current text-70 hover:text-danger",attrs:{type:"delete"}})],1):t._e(),t._v(" "),t.isEditing?a("button",{staticClass:"btn btn-default btn-danger mr-3",attrs:{type:"button"},on:{click:t.handleCancel}},[t._v("Cancel")]):t._e(),t._v(" "),t.isEditing?a("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"button"},on:{click:t.handleSave}},[t._v("Save")]):t._e()])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isAddingNew?a("div",[a("div",{staticClass:"flex items-center border-b border-40"},[t._m(0),t._v(" "),a("div",{staticClass:"w-1/2 pr-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"w-full form-control form-input form-input-bordered",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSaveAttribute(e)},input:function(e){e.target.composing||(t.newName=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"flex items-center"},[t._m(1),t._v(" "),a("div",{staticClass:"w-1/2 pr-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue,expression:"newValue"}],staticClass:"w-full form-control form-input form-input-bordered",attrs:{type:"text",placeholder:"Value"},domProps:{value:t.newValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSaveAttribute(e)},input:function(e){e.target.composing||(t.newValue=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"bg-30 flex -mx-6 -mb-3 px-8 py-4 justify-end"},[a("button",{staticClass:"btn btn-default btn-danger mr-3",attrs:{type:"button"},on:{click:t.handleCancelAttribute}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"button"},on:{click:t.handleSaveAttribute}},[t._v("Save Attribute")])])]):a("div",[a("div",{staticClass:"flex mb-6"},[a("div",{staticClass:"w-1/4"},[a("label",{staticClass:"inline-block mb-1 text-80",attrs:{for:"company-select"}},[t._v("Select a company to edit:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCompanyId,expression:"selectedCompanyId"}],staticClass:"w-full form-control form-select",attrs:{id:"company-select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedCompanyId=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}},[t._v("Default")]),t._v(" "),t._l(t.companies,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]),t._v(" "),a("div",{staticClass:"w-3/4 text-right"},[a("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"button"},on:{click:t.handleAddAttribute}},[t._v("Add New Attribute")])])]),t._v(" "),a("div",{staticClass:"flex pb-3 border-b border-40"},[t._m(2),t._v(" "),a("div",{staticClass:"flex w-3/4"},[a("div",{staticClass:"w-2/3"},[a("strong",{staticClass:"text-xs text-80 uppercase"},[t._v(t._s(t.companyName)+" VALUE")])]),t._v(" "),a("div",{staticClass:"w-1/6"},[t.isDefaultCompany?t._e():a("strong",{staticClass:"text-xs text-80"},[t._v("HIDDEN")])]),t._v(" "),t._m(3)])]),t._v(" "),t._l(t.attributes,function(e){return a("attribute",{key:e.id,attrs:{attribute:e,attributeValues:t.attributeValues,selectedCompanyId:t.selectedCompanyId,isDefaultCompany:t.isDefaultCompany},on:{"attribute-update":t.updateAttribute,"attribute-delete":t.handleDeleteAttributeValue}})})],2),t._v(" "),t.isModalOpen?a("delete-resource-modal",{on:{close:t.handleCloseModal,confirm:t.handleConfirmDeleteAttributeValue}},[a("div",{staticClass:"p-8"},[a("heading",{staticClass:"mb-6",attrs:{level:2}},[t._v("Delete Attribute")]),t._v(" "),a("p",{staticClass:"text-80 leading-normal"},[t._v("\n        Are you sure you want to delete this attribute?\n        "),t.isDefaultCompany?a("span"):t._e()]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.isDefaultCompany,expression:"isDefaultCompany"}],staticClass:"text-80 leading-normal text-xs mt-4"},[a("span",{staticClass:"font-bold"},[t._v("Note:")]),t._v("\n        Removing a default attribute\n        "),a("strong",[t._v("will")]),t._v(" remove it from all companies that do not have a customized value\n      ")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.isDefaultCompany,expression:"!isDefaultCompany"}],staticClass:"text-80 leading-normal text-xs mt-4"},[a("span",{staticClass:"font-bold"},[t._v("Note:")]),t._v("\n        Removing an attribute that has been customized for a specific company will\n        "),a("strong",[t._v("not")]),t._v(" remove it from any other company\n      ")])],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/4 py-8 pr-3"},[e("span",{staticClass:"text-80"},[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/4 py-8 pr-3"},[e("span",{staticClass:"text-80"},[this._v("Value")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/4"},[e("strong",{staticClass:"text-xs text-80"},[this._v("NAME")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/6 text-right"},[e("strong",{staticClass:"text-xs text-80"},[this._v("ACTIONS")])])}]}},function(t,e){}]);